
Design thoughts while coding Structuredfun

Process for pulling a thumbnail
Get file metadata
Derive cachekey
Is file in cache?
  Yes, return
Is it video?
  Is full res in cache
    Yes, pass back to image_obj to subsample to thumbnail, return
  Pull full res from video
  Store in cache
  Treat as image
Is it image
  Subsample
  Return

url substitution
  comes up for shares
  comes up for get nth image
can't mess with url
  - because that's really the same 
  + convenient because everything else is downstream
let's do it on a filename level