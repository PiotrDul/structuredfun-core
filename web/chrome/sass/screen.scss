// ---------------------------------------------------------------------------
// Imports

@import "compass/reset";
@import "base";

$background_grid_light: #eeeeee;
$background_html_light: #ffffff;

$background_grid_dark: #333333;
$background_html_dark: #222222;

/* -------------------------------------------------------------------------*/
/* Layout */

// yardsticks to measure viewport's actual size
.yardstick {
  background: #0000ff;
}
#yardstick-x {
  width: 100%;
  height: 0;
}
#yardstick-y {
  width: 0;
  height: 100%;
  float: left;
}

html {
  background-color: $background_html_light;
}

/* -------------------------------------------------------------------------*/
/* Modernizr variants */

html.flexbox.flow-x {
  overflow-x: scroll;

  .page .content {
    // row-major order
    .flow-x {
      display: -webkit-flex;
      -webkit-flex-flow: column wrap;
      -webkit-align-items: center;
      -webkit-justify-content: flex-start;
      -webkit-align-content: flex-start;
      display: flex;
      flex-flow: column wrap;
      align-items: center;
      justify-content: flex-start;
      align-content: flex-start;
      height: 100%;
    }
  }
}

// flow y, only option for no-flexbox browsers
html.flow-y, html.no-flexbox.flow-x {
  overflow-y: scroll;

  // column-major order
  .page .content {
    li {
      float: left;
    }
  }
}

// use CSS hover if no javascript
html.no-js {
  .header:hover, .footer:hover {
    width: 100%;
  }
}

/* -------------------------------------------------------------------------*/
/* Page */

.page {
  height: 100%;

  // header and footer are full-width by default.
  .header, .footer {
    clear: both;
    background-color: #ff0000;
    height: 2.0em;
    width: 2.0em;
    position: fixed;
    z-index: 2;
    overflow: hidden;
    
    p {
      float: left;
    }
  }

  .header {
    top: 0;
  }
  
  // footer not currently used
  .footer {
    bottom: 0;
  }

  .content {
    height: 100%;

    .flow-em > .cell {
      width: 20em;
      height: 20em;
    }

    .flow-pc > .cell {
      width: 25%;
      height: 50%;
    }

    .flow > .cell {
      border-style: solid; 
      border-color: $background_grid_light; 
      border-left-width: 1px;
      // add border to the top/left, but offset with margin to allow full percentage width/height
      border-top-width: 1px;
      margin-top: -1px;
      margin-left: -1px;
      // centre
      text-align: center;
      // all images are unselectable
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;

      a { 
        // relative parent required for x-bound images
        position: relative;
              
        > img {
        }
      
        // landscape images
        > img.x-bound {
          position: relative;
          width: 100%;
          top: 50%;
          transform: translate(0, -50%);
          -ms-transform: translate(0, -50%);
          -webkit-transform: translate(0, -50%);
        }
      
        // portrait images
        > img.y-bound {
          height: 100%;
        }

        .title {
          height: 0;
          line-height: 0;
          top: -1.0em;
          position: relative;
        }

        // folders with preview images
        .folder {
          background: url('/chrome/images/fullres/folder_back.png') no-repeat left top;
          background-size: 100% 100%;
          width: 100%;
          height: 100%;
          display: block;
          text-align: left;
          position: relative;
  
          .overlay {
            width: 100%;
            height: 100%;
            display: inline-block;
            // absolute position within relative container to do overlay with no effective height
            position: absolute;
            top: 0;
          }
  
          .preview {
            width: 25%;
            height: 34.5%;
            position: relative;
            margin-right: 3%;
          }
          
          .preview-1, .preview-3 {
            margin-left: 24%;
          }
          
          .preview-1, .preview-2  {
            // have to use 'top' because 'margin-top' percentage calculated on element width!
            top: 15%;
          }
  
          .preview-3, .preview-4  {
            top: 17%;
          }        
        }
      }
    }
  }
}

/* -------------------------------------------------------------------------*/
/* Theme variants */

html.theme-dark {
  background-color: $background_html_dark;

  .page .content .flow > .cell {
    border-color: $background_grid_dark; 
  }
}



